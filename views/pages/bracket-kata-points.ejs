<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/styles/general.css" />
    <link rel="stylesheet" href="/styles/overlay.css" />
    <link rel="stylesheet" href="/styles/alert-overlay.css" />
    <link rel="stylesheet" href="/styles/bracket.css" />
    <link rel="stylesheet" href="/styles/bracket-points.css" />
    <link rel="stylesheet" href="/styles/final-notice.css" />

    <script src="/scripts/bracket-kata-points.js" defer></script>
    <script src="/scripts/overlay.js" defer></script>
    <script src="/scripts/confirm-winner-overlay.js" defer></script>
    <script src="/scripts/alert-overlay.js" defer></script>

    <title><%= date %> Group <%= group %></title>
  </head>
  <body>
    <%- include('../partials/alert-overlay.ejs') %>
    <%- include('../partials/confirm-winner-overlay.ejs') %>
    <%- include('../partials/bracket-result-overlay.ejs') %>
    <%- include('../partials/match-overlay-kata-points.ejs') %>
    <%- include('../partials/match-kata-final-notice.ejs') %>

    <h2 id="bracket-name">List of participants for <%= date %> group <%= group %>:</h2>
    <div id="main-bracket">
      <% for (let i = 0; i < rounds.length; i++) { %>
      <h3>Round <%= i + 1 %></h3>
      <table class="participant-table">
        <thead>
          <% if (i === 0) { %>
          <tr id="table-headers">
            <th>Participant's name</th>
            <th>Current round points</th>
            <th>Points in total</th>
          </tr>
          <% } %>
        </thead>
        <tbody>
          <% for (let participant of rounds[i]) { %>
          <tr>
            <td><%= participant.name %></td>
            <td><%= participant.currentRoundPoints %></td>
            <td><%= participant.totalPoints %></td>
          </tr>
          <% } %>
        </tbody>
      </table>
      <% } %>
    </div>
    <div id="bracket-actions">
      <button class="btn" id="start-match-button">
        <%= isEnd ? 'View Results' : 'Start matchup' %>
      </button>
      <a href="/data/view-groups" class="btn">Back to View Groups</a>
    </div>
  </body>
</html>
